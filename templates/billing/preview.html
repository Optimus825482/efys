{% extends 'base.html' %}
{% block title %}Fatura Ã–nizleme{% endblock %}
{% block page_title %}Fatura Ã–nizleme{% endblock %}
{% set breadcrumb = [{'name': 'FaturalandÄ±rma', 'url': url_for('billing.index')}, {'name': 'Fatura Ã–nizleme'}] %}
{% block content %}

{% if not invoice %}
<div class="card" style="max-width: 800px; margin: 0 auto">
  <div class="card-body" style="padding: 40px; text-align: center">
    <div style="font-size: 3rem; margin-bottom: 16px">ğŸ“„</div>
    <h2 style="color: var(--color-text-primary); margin-bottom: 8px">Fatura Ã–nizleme</h2>
    <p style="color: var(--color-text-secondary)">Ã–nizlemek iÃ§in abone ve dÃ¶nem seÃ§in</p>
  </div>
</div>
{% else %}

<div class="card" style="max-width: 900px; margin: 0 auto">
  <div class="card-body" style="padding: 40px">
    <!-- Invoice Header -->
    <div
      style="display: flex; justify-content: space-between; margin-bottom: 32px; border-bottom: 2px solid var(--color-primary); padding-bottom: 20px;">
      <div>
        <h1 style="font-size: 1.75rem; font-weight: 700; color: var(--color-primary); margin-bottom: 4px;">GÃ–NEN
          ORGANÄ°ZE SANAYÄ° BÃ–LGESÄ°</h1>
        <div style="font-size: 0.875rem; color: var(--color-text-secondary)">OSB DaÄŸÄ±tÄ±m LisansÄ±:
          EDL-2006-0XXX<br>Elektrik FaturalandÄ±rma ve YÃ¶netim Sistemi</div>
      </div>
      <div style="text-align: right">
        <div style="font-size: 1.25rem; font-weight: 700; color: var(--color-text-primary); margin-bottom: 8px;">
          ELEKTRÄ°K FATURASI</div>
        <div style="font-size: 0.875rem; color: var(--color-text-secondary)"><span
            style="color: var(--color-warning);">âš  Ã–NÄ°ZLEME</span></div>
        <div style="font-size: 0.875rem; color: var(--color-text-secondary); margin-top: 8px;">DÃ¼zenleme Tarihi: {{
          invoice.period.invoice_date.strftime('%d.%m.%Y') if invoice.period.invoice_date else 'N/A' }}</div>
      </div>
    </div>

    <!-- Two Column Info -->
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-bottom: 24px;">
      <!-- Abone Bilgileri -->
      <div style="padding: 16px; background: var(--color-bg-page); border-radius: var(--radius-md);">
        <div
          style="font-size: 0.75rem; font-weight: 600; color: var(--color-text-muted); margin-bottom: 12px; text-transform: uppercase;">
          Abone Bilgileri</div>
        <table style="width: 100%; font-size: 0.875rem;">
          <tr>
            <td style="color: var(--color-text-secondary); padding: 4px 0;">Abone No:</td>
            <td style="font-weight: 600; text-align: right;">{{ invoice.subscriber.subscriber_code }}</td>
          </tr>
          <tr>
            <td style="color: var(--color-text-secondary); padding: 4px 0;">Unvan:</td>
            <td style="font-weight: 600; text-align: right;">{{ invoice.subscriber.name }}</td>
          </tr>
          <tr>
            <td style="color: var(--color-text-secondary); padding: 4px 0;">Vergi No:</td>
            <td style="text-align: right;">{{ invoice.subscriber.tax_no or '-' }}</td>
          </tr>
          <tr>
            <td style="color: var(--color-text-secondary); padding: 4px 0;">Gerilim Seviyesi:</td>
            <td style="text-align: right;">{{ invoice.voltage_level|default('OG') }} ({{ 'Orta Gerilim' if
              invoice.voltage_level|default('OG') == 'OG' else 'AlÃ§ak Gerilim' }})</td>
          </tr>
          <tr>
            <td style="color: var(--color-text-secondary); padding: 4px 0;">Tarife Tipi:</td>
            <td style="text-align: right;">{{ 'Tek Terimli' if invoice.tariff_structure|default('single_term') ==
              'single_term' else 'Ã‡ift Terimli' }}</td>
          </tr>
        </table>
      </div>
      <!-- SayaÃ§ ve DÃ¶nem Bilgileri -->
      <div style="padding: 16px; background: var(--color-bg-page); border-radius: var(--radius-md);">
        <div
          style="font-size: 0.75rem; font-weight: 600; color: var(--color-text-muted); margin-bottom: 12px; text-transform: uppercase;">
          SayaÃ§ ve DÃ¶nem Bilgileri</div>
        <table style="width: 100%; font-size: 0.875rem;">
          <tr>
            <td style="color: var(--color-text-secondary); padding: 4px 0;">SayaÃ§ No:</td>
            <td style="font-weight: 600; text-align: right;">{{ invoice.meter_no|default('N/A') }}</td>
          </tr>
          <tr>
            <td style="color: var(--color-text-secondary); padding: 4px 0;">Ã‡arpan:</td>
            <td style="text-align: right;">{{ invoice.multiplier|default(1) }}</td>
          </tr>
          <tr>
            <td style="color: var(--color-text-secondary); padding: 4px 0;">Fatura DÃ¶nemi:</td>
            <td style="font-weight: 600; text-align: right;">{{ invoice.period.name }}</td>
          </tr>
          <tr>
            <td style="color: var(--color-text-secondary); padding: 4px 0;">Ä°lk Okuma:</td>
            <td style="text-align: right;">{{ invoice.period.period_start.strftime('%d.%m.%Y') }}</td>
          </tr>
          <tr>
            <td style="color: var(--color-text-secondary); padding: 4px 0;">Son Okuma:</td>
            <td style="text-align: right;">{{ invoice.period.period_end.strftime('%d.%m.%Y') }}</td>
          </tr>
        </table>
      </div>
    </div>

    <!-- TÃ¼ketim Ã–zeti -->
    <div
      style="padding: 12px 16px; background: var(--color-primary-100); border-radius: var(--radius-md); margin-bottom: 24px;">
      <div style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 16px; text-align: center;">
        <div>
          <div style="font-size: 0.75rem; color: var(--color-text-muted);">T1 (GÃ¼ndÃ¼z)</div>
          <div style="font-weight: 700; color: var(--color-primary);">{{ "{:,.0f}".format(invoice.consumption.t1) }} kWh
          </div>
        </div>
        <div>
          <div style="font-size: 0.75rem; color: var(--color-text-muted);">T2 (Puant)</div>
          <div style="font-weight: 700; color: var(--color-warning);">{{ "{:,.0f}".format(invoice.consumption.t2) }} kWh
          </div>
        </div>
        <div>
          <div style="font-size: 0.75rem; color: var(--color-text-muted);">T3 (Gece)</div>
          <div style="font-weight: 700; color: var(--color-success);">{{ "{:,.0f}".format(invoice.consumption.t3) }} kWh
          </div>
        </div>
        <div style="border-left: 1px solid var(--color-border); padding-left: 16px;">
          <div style="font-size: 0.75rem; color: var(--color-text-muted);">Toplam TÃ¼ketim</div>
          <div style="font-weight: 700; font-size: 1.25rem;">{{ "{:,.0f}".format(invoice.consumption.total) }} kWh</div>
        </div>
        <div>
          <div style="font-size: 0.75rem; color: var(--color-text-muted);">Max Demant</div>
          <div style="font-weight: 700;">{{ "{:,.1f}".format(invoice.consumption.max_demand|default(0)) }} kW</div>
        </div>
      </div>
    </div>

    <!-- Fatura Kalemleri Tablosu -->
    <table class="table" style="margin-bottom: 24px;">
      <thead>
        <tr>
          <th style="width: 50%;">AÃ§Ä±klama</th>
          <th style="text-align: right;">Miktar</th>
          <th style="text-align: right;">Birim</th>
          <th style="text-align: right;">Birim Fiyat</th>
          <th style="text-align: right;">Tutar (TL)</th>
        </tr>
      </thead>
      <tbody>
        <!-- Aktif Enerji Bedelleri -->
        <tr style="background: var(--color-bg-secondary);">
          <td colspan="5" style="font-weight: 600; font-size: 0.875rem; color: var(--color-text-muted);">âš¡ AKTÄ°F ENERJÄ°
            BEDELÄ°</td>
        </tr>
        {% if invoice.consumption.t1 and invoice.consumption.t1 > 0 %}
        <tr>
          <td style="padding-left: 24px;">T1 - GÃ¼ndÃ¼z TÃ¼ketimi (06:00-17:00)</td>
          <td style="text-align: right;">{{ "{:,.2f}".format(invoice.consumption.t1) }}</td>
          <td style="text-align: right;">kWh</td>
          <td style="text-align: right;">â‚º{{ "{:,.4f}".format(invoice.t1_rate|default(invoice.subscriber.t1_rate)) }}
          </td>
          <td style="text-align: right; font-weight: 600;">â‚º{{ "{:,.2f}".format(invoice.t1_amount) }}</td>
        </tr>
        {% endif %}
        {% if invoice.consumption.t2 and invoice.consumption.t2 > 0 %}
        <tr>
          <td style="padding-left: 24px;">T2 - Puant TÃ¼ketimi (17:00-22:00)</td>
          <td style="text-align: right;">{{ "{:,.2f}".format(invoice.consumption.t2) }}</td>
          <td style="text-align: right;">kWh</td>
          <td style="text-align: right;">â‚º{{ "{:,.4f}".format(invoice.t2_rate|default(invoice.subscriber.t2_rate)) }}
          </td>
          <td style="text-align: right; font-weight: 600;">â‚º{{ "{:,.2f}".format(invoice.t2_amount) }}</td>
        </tr>
        {% endif %}
        {% if invoice.consumption.t3 and invoice.consumption.t3 > 0 %}
        <tr>
          <td style="padding-left: 24px;">T3 - Gece TÃ¼ketimi (22:00-06:00)</td>
          <td style="text-align: right;">{{ "{:,.2f}".format(invoice.consumption.t3) }}</td>
          <td style="text-align: right;">kWh</td>
          <td style="text-align: right;">â‚º{{ "{:,.4f}".format(invoice.t3_rate|default(invoice.subscriber.t3_rate)) }}
          </td>
          <td style="text-align: right; font-weight: 600;">â‚º{{ "{:,.2f}".format(invoice.t3_amount) }}</td>
        </tr>
        {% endif %}

        <!-- DaÄŸÄ±tÄ±m ve Ä°letim Bedelleri -->
        <tr style="background: var(--color-bg-secondary);">
          <td colspan="5" style="font-weight: 600; font-size: 0.875rem; color: var(--color-text-muted);">ğŸ”Œ DAÄITIM VE
            Ä°LETÄ°M BEDELLERÄ°</td>
        </tr>
        {% if invoice.distribution_amount and invoice.distribution_amount > 0 %}
        <tr>
          <td style="padding-left: 24px;">OSB DaÄŸÄ±tÄ±m Bedeli ({{ invoice.voltage_level|default('OG') }}){% if
            invoice.distribution_capped|default(false) %} <span
              style="font-size: 0.75rem; color: var(--color-warning);">âš  Tavan</span>{% endif %}</td>
          <td style="text-align: right;">{{ "{:,.2f}".format(invoice.net_consumption|default(invoice.consumption.total))
            }}</td>
          <td style="text-align: right;">kWh</td>
          <td style="text-align: right;">â‚º{{ "{:,.4f}".format(invoice.distribution_rate|default(0.25)) }}</td>
          <td style="text-align: right; font-weight: 600;">â‚º{{ "{:,.2f}".format(invoice.distribution_amount) }}</td>
        </tr>
        {% endif %}
        {% if invoice.technical_loss_amount and invoice.technical_loss_amount > 0 %}
        <tr>
          <td style="padding-left: 24px;">Teknik KayÄ±p PayÄ± <span
              style="font-size: 0.75rem; color: var(--color-text-muted);">(Oran: %{{
              "{:.2f}".format((invoice.technical_loss_share_ratio|default(0)) * 100) }})</span></td>
          <td style="text-align: right;">{{ "{:,.2f}".format(invoice.technical_loss_share) }}</td>
          <td style="text-align: right;">kWh</td>
          <td style="text-align: right; font-size: 0.75rem; color: var(--color-text-muted);">Ort. Tarife</td>
          <td style="text-align: right; font-weight: 600;">â‚º{{ "{:,.2f}".format(invoice.technical_loss_amount) }}</td>
        </tr>
        {% endif %}
        {% if invoice.transmission_amount and invoice.transmission_amount > 0 %}
        <tr>
          <td style="padding-left: 24px;">TEÄ°AÅ Ä°letim Bedeli</td>
          <td style="text-align: right;">{{ "{:,.2f}".format(invoice.net_consumption|default(invoice.consumption.total))
            }}</td>
          <td style="text-align: right;">kWh</td>
          <td style="text-align: right;">â‚º{{ "{:,.4f}".format(invoice.transmission_rate|default(0.035)) }}</td>
          <td style="text-align: right; font-weight: 600;">â‚º{{ "{:,.2f}".format(invoice.transmission_amount) }}</td>
        </tr>
        {% endif %}

        <!-- GÃ¼Ã§ Bedeli (Ã‡ift Terimli) -->
        {% if invoice.capacity_amount and invoice.capacity_amount > 0 %}
        <tr style="background: var(--color-bg-secondary);">
          <td colspan="5" style="font-weight: 600; font-size: 0.875rem; color: var(--color-text-muted);">âš¡ GÃœÃ‡ BEDELÄ°
            (Ã‡Ä°FT TERÄ°MLÄ°)</td>
        </tr>
        <tr>
          <td style="padding-left: 24px;">GÃ¼Ã§ Bedeli (SÃ¶zleÅŸme GÃ¼cÃ¼)</td>
          <td style="text-align: right;">{{ "{:,.1f}".format(invoice.subscriber.contract_demand|default(0)) }}</td>
          <td style="text-align: right;">kW</td>
          <td style="text-align: right;">-</td>
          <td style="text-align: right; font-weight: 600;">â‚º{{ "{:,.2f}".format(invoice.capacity_amount) }}</td>
        </tr>
        {% endif %}
        {% if invoice.capacity_excess_amount and invoice.capacity_excess_amount > 0 %}
        <tr style="background: var(--color-danger-bg);">
          <td style="padding-left: 24px;">âš ï¸ GÃ¼Ã§ AÅŸÄ±m Bedeli</td>
          <td style="text-align: right;">{{ "{:,.1f}".format(invoice.consumption.max_demand|default(0)) }}</td>
          <td style="text-align: right;">kW</td>
          <td style="text-align: right;">-</td>
          <td style="text-align: right; font-weight: 600; color: var(--color-danger);">â‚º{{
            "{:,.2f}".format(invoice.capacity_excess_amount) }}</td>
        </tr>
        {% endif %}

        <!-- Reaktif Ceza -->
        {% if invoice.reactive_amount and invoice.reactive_amount > 0 %}
        <tr style="background: var(--color-bg-secondary);">
          <td colspan="5" style="font-weight: 600; font-size: 0.875rem; color: var(--color-text-muted);">âš¡ REAKTÄ°F
            ENERJÄ°</td>
        </tr>
        <tr style="background: var(--color-warning-bg);">
          <td style="padding-left: 24px;">âš ï¸ Reaktif Enerji CezasÄ± ({{ 'EndÃ¼ktif > %20' if
            invoice.reactive_type|default('inductive') == 'inductive' else 'Kapasitif > %15' }})</td>
          <td style="text-align: right;">{{ "{:,.2f}".format(invoice.consumption.inductive +
            invoice.consumption.capacitive) }}</td>
          <td style="text-align: right;">kVArh</td>
          <td style="text-align: right;">â‚º{{ "{:,.4f}".format(invoice.reactive_rate|default(0.89)) }}</td>
          <td style="text-align: right; font-weight: 600; color: var(--color-warning);">â‚º{{
            "{:,.2f}".format(invoice.reactive_amount) }}</td>
        </tr>
        {% endif %}

        <!-- GES MahsuplaÅŸma -->
        {% if invoice.solar and invoice.solar.has_solar %}
        <tr style="background: var(--color-bg-secondary);">
          <td colspan="5" style="font-weight: 600; font-size: 0.875rem; color: var(--color-text-muted);">â˜€ï¸ GÃœNEÅ
            ENERJÄ°SÄ° MAHSUPLAÅMASI</td>
        </tr>
        <tr>
          <td style="padding-left: 24px;">Ãœretim</td>
          <td style="text-align: right;">{{ "{:,.2f}".format(invoice.solar.production) }}</td>
          <td style="text-align: right;">kWh</td>
          <td style="text-align: right;">-</td>
          <td style="text-align: right; color: var(--color-text-muted);">-</td>
        </tr>
        <tr>
          <td style="padding-left: 24px;">Åebekeye Verilen</td>
          <td style="text-align: right;">{{ "{:,.2f}".format(invoice.solar.exported) }}</td>
          <td style="text-align: right;">kWh</td>
          <td style="text-align: right;">-</td>
          <td style="text-align: right; color: var(--color-text-muted);">-</td>
        </tr>
        {% if invoice.solar_credit_amount and invoice.solar_credit_amount > 0 %}
        <tr style="background: var(--color-success-bg);">
          <td style="padding-left: 24px;">âœ“ GES Ãœretim Kredisi</td>
          <td style="text-align: right;">{{ "{:,.2f}".format(invoice.solar.exported) }}</td>
          <td style="text-align: right;">kWh</td>
          <td style="text-align: right;">-</td>
          <td style="text-align: right; font-weight: 600; color: var(--color-success);">-â‚º{{
            "{:,.2f}".format(invoice.solar_credit_amount) }}</td>
        </tr>
        {% endif %}
        {% endif %}
      </tbody>
    </table>

    <!-- Toplam HesabÄ± -->
    <div style="display: flex; justify-content: flex-end">
      <div
        style="width: 400px; border: 1px solid var(--color-border); border-radius: var(--radius-md); overflow: hidden;">
        <div
          style="display: flex; justify-content: space-between; padding: 12px 16px; border-bottom: 1px solid var(--color-border); background: var(--color-bg-page);">
          <span>Ara Toplam</span>
          <span style="font-weight: 600;">â‚º{{ "{:,.2f}".format(invoice.subtotal) }}</span>
        </div>
        {% if invoice.btv_amount and invoice.btv_amount > 0 %}
        <div
          style="display: flex; justify-content: space-between; padding: 12px 16px; border-bottom: 1px solid var(--color-border);">
          <span>Belediye TÃ¼ketim Vergisi (BTV) - %{{ "{:.0f}".format((invoice.btv_rate|default(0.05)) * 100) }}</span>
          <span style="font-weight: 600;">â‚º{{ "{:,.2f}".format(invoice.btv_amount) }}</span>
        </div>
        {% endif %}
        <div
          style="display: flex; justify-content: space-between; padding: 12px 16px; border-bottom: 1px solid var(--color-border);">
          <span>Katma DeÄŸer Vergisi (KDV) - %{{ "{:.0f}".format((invoice.kdv_rate|default(0.20)) * 100) }}</span>
          <span style="font-weight: 600;">â‚º{{
            "{:,.2f}".format(invoice.kdv_amount|default(invoice.vat_amount|default(0))) }}</span>
        </div>
        <div
          style="display: flex; justify-content: space-between; padding: 16px; background: var(--color-primary); color: white; font-size: 1.25rem;">
          <span style="font-weight: 700;">GENEL TOPLAM</span>
          <span style="font-weight: 700;">â‚º{{ "{:,.2f}".format(invoice.total_amount) }}</span>
        </div>
      </div>
    </div>

    <!-- Ã–deme Bilgileri -->
    <div
      style="margin-top: 32px; padding: 20px; background: var(--color-bg-page); border-radius: var(--radius-md); border-left: 4px solid var(--color-primary);">
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px;">
        <div>
          <div style="font-weight: 600; margin-bottom: 8px;">Ã–deme Bilgileri</div>
          <div style="font-size: 0.875rem; color: var(--color-text-secondary);">
            Banka: Ziraat BankasÄ± - GÃ¶nen Åubesi<br>
            IBAN: TR00 0000 0000 0000 0000 0000 00<br>
            AÃ§Ä±klama: {{ invoice.subscriber.subscriber_code }} - {{ invoice.period.name }}
          </div>
        </div>
        <div style="text-align: right;">
          <div style="font-weight: 600; margin-bottom: 8px;">Son Ã–deme Tarihi</div>
          <div style="font-size: 1.5rem; font-weight: 700; color: var(--color-primary);">{{
            invoice.period.due_date.strftime('%d.%m.%Y') if invoice.period.due_date else 'N/A' }}</div>
          <div style="font-size: 0.75rem; color: var(--color-text-muted); margin-top: 4px;">Gecikme faizi uygulanÄ±r
          </div>
        </div>
      </div>
    </div>

    <!-- Yasal Bilgiler -->
    <div
      style="margin-top: 24px; padding-top: 16px; border-top: 1px solid var(--color-border); font-size: 0.75rem; color: var(--color-text-muted);">
      <p style="margin-bottom: 8px;"><strong>EPDK MevzuatÄ±:</strong> Bu fatura, "Organize Sanayi BÃ¶lgelerinin Elektrik
        PiyasasÄ± Faaliyetlerine Ä°liÅŸkin YÃ¶netmelik" ve "OSB Elektrik DaÄŸÄ±tÄ±m Bedelleri El KitabÄ±" hÃ¼kÃ¼mlerine uygun
        olarak dÃ¼zenlenmiÅŸtir.</p>
      <p style="margin-bottom: 8px;"><strong>Reaktif Enerji:</strong> Elektrik PiyasasÄ± MÃ¼ÅŸteri Hizmetleri YÃ¶netmeliÄŸi
        16. maddesi uyarÄ±nca; EndÃ¼ktif reaktif enerji oranÄ± %20'yi, Kapasitif reaktif enerji oranÄ± %15'i aÅŸtÄ±ÄŸÄ±nda ceza
        uygulanÄ±r.</p>
      <p><strong>Ä°tiraz:</strong> Faturaya iliÅŸkin itirazlar 15 gÃ¼n iÃ§inde yazÄ±lÄ± olarak OSB MÃ¼dÃ¼rlÃ¼ÄŸÃ¼'ne yapÄ±lmalÄ±dÄ±r.
      </p>
    </div>

    <!-- Ã–nizleme UyarÄ±sÄ± -->
    <div
      style="margin-top: 24px; padding: 16px; background: var(--color-warning-bg); border-radius: var(--radius-md); text-align: center;">
      <div style="font-size: 1.25rem; margin-bottom: 4px;">âš ï¸</div>
      <div style="font-weight: 600; color: var(--color-warning);">Bu bir Ã–NÄ°ZLEMEdir</div>
      <div style="font-size: 0.875rem; color: var(--color-text-secondary);">Fatura henÃ¼z kesilmemiÅŸtir. "Fatura Kes"
        butonuna tÄ±klayarak faturayÄ± onaylayabilirsiniz.</div>
    </div>
  </div>

  <div class="card-footer" style="display: flex; justify-content: space-between; gap: 12px">
    <button class="btn btn-secondary" onclick="window.history.back()">â† Geri</button>
    <div style="display: flex; gap: 12px">
      <button class="btn btn-outline-primary" onclick="window.print()">ğŸ–¨ï¸ YazdÄ±r</button>
      <button class="btn btn-primary" onclick="createInvoice()">âœ“ Fatura Kes</button>
    </div>
  </div>
</div>

<script>
  function createInvoice() {
    if ( !confirm( 'Bu faturayÄ± kesmek istediÄŸinizden emin misiniz?\n\nBu iÅŸlem geri alÄ±namaz.' ) ) return;
    fetch( '/billing/api/create-invoice', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify( {
        subscriber_id: {{ invoice.subscriber.id }},
      period_id: {{ invoice.period.id }},
  tariff_id: { { invoice.subscriber.tariff_id } }
    })
  })
  .then( res => res.json() )
    .then( data => {
      if ( data.success ) {
        alert( 'âœ“ Fatura baÅŸarÄ±yla oluÅŸturuldu!\n\nFatura No: ' + data.data.invoice_no + '\nTutar: â‚º' + data.data.total_amount.toLocaleString( 'tr-TR', { minimumFractionDigits: 2 } ) );
        window.location.href = '/billing';
      } else {
        alert( 'âŒ Hata: ' + data.error );
      }
    } )
    .catch( err => alert( 'âŒ Hata: ' + err ) );
}
</script>

<style>
  @media print {
    .card-footer {
      display: none !important;
    }

    .sidebar,
    .header,
    .breadcrumb {
      display: none !important;
    }

    .card {
      box-shadow: none !important;
      border: none !important;
    }
  }
</style>

{% endif %}
{% endblock %}